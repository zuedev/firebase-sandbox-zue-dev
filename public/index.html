<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Welcome to Firebase Hosting</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/10.13.2/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/10.13.2/firebase-auth-compat.js"></script>
    <script
      defer
      src="/__/firebase/10.13.2/firebase-database-compat.js"
    ></script>
    <script
      defer
      src="/__/firebase/10.13.2/firebase-firestore-compat.js"
    ></script>
    <script
      defer
      src="/__/firebase/10.13.2/firebase-functions-compat.js"
    ></script>
    <script
      defer
      src="/__/firebase/10.13.2/firebase-messaging-compat.js"
    ></script>
    <script
      defer
      src="/__/firebase/10.13.2/firebase-storage-compat.js"
    ></script>
    <script
      defer
      src="/__/firebase/10.13.2/firebase-analytics-compat.js"
    ></script>
    <script
      defer
      src="/__/firebase/10.13.2/firebase-remote-config-compat.js"
    ></script>
    <script
      defer
      src="/__/firebase/10.13.2/firebase-performance-compat.js"
    ></script>
    <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>

    <style media="screen">
      html {
        background: #333;
      }

      main {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }

      #login,
      #signOut {
        display: none;
      }
    </style>
  </head>
  <body>
    <main>
      <section id="login">
        <button onclick="firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider())">
          Login with Google
        </button>
      </section>
      <section id="signOut">
        <button onclick="firebase.auth().signOut()">Logout</button>
      </section>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        firebase.analytics();
        firebase.performance();
        firebase.auth().onAuthStateChanged((user) => {
          document.querySelectorAll("#login, #signOut").forEach((element) => {
            element.style.display = "none";
          });

          if (user) {
            console.log("User is signed in", user.displayName);

            document.querySelector("#signOut").style.display = "block";
          } else {
            console.log("No user is signed in");

            document.querySelector("#login").style.display = "block";
          }
        });
      });
    </script>
  </body>
</html>
